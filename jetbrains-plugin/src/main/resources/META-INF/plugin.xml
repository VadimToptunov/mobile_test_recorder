<idea-plugin>
    <id>com.mobiletest.recorder</id>
    <name>Mobile Test Recorder</name>
    <vendor email="support@mobile-observe.dev" url="https://github.com/VadimToptunov/mobile_test_recorder">
        Mobile Test Recorder
    </vendor>

    <description><![CDATA[
    <h1>Mobile Test Recorder - Intelligent Mobile Testing Platform</h1>
    
    <p>Transform your mobile testing workflow with AI-powered test generation, interactive UI control, 
    and smart selector management.</p>
    
    <h2>Key Features:</h2>
    <ul>
        <li><strong>ğŸ“± Device Management</strong> - Control Android emulators and iOS simulators directly from IDE</li>
        <li><strong>ğŸ” UI Tree Inspector</strong> - Explore app UI hierarchy with Appium XML viewer</li>
        <li><strong>ğŸ“Š Live Device Logs</strong> - Stream and filter logcat/simctl logs in real-time</li>
        <li><strong>ğŸ¯ Interactive Control</strong> - Tap, swipe, type on device screen from IDE</li>
        <li><strong>ğŸ§  Smart Selectors</strong> - AI-powered selector generation with stability scoring</li>
        <li><strong>ğŸ”„ Flow Analysis</strong> - Automatic detection of app flows and states</li>
        <li><strong>ğŸŒ Multi-Language</strong> - Generate tests in Python, Java, Kotlin, JS/TS, Go, Ruby</li>
        <li><strong>ğŸ”Œ Multi-Backend</strong> - Support for Appium, Espresso, XCTest, Detox, Maestro</li>
    </ul>
    
    <h2>Requirements:</h2>
    <ul>
        <li>Python 3.8+ installed</li>
        <li><code>mobile-observe-test</code> CLI: <code>pip install mobile-observe-test</code></li>
        <li>For Android: Android SDK with adb</li>
        <li>For iOS: Xcode with simctl</li>
    </ul>
    
    <h2>Quick Start:</h2>
    <ol>
        <li>Install <code>mobile-observe-test</code> CLI</li>
        <li>Open View â†’ Tool Windows â†’ Mobile Test Recorder</li>
        <li>Click "Start Daemon" button</li>
        <li>Select your device and start testing!</li>
    </ol>
    
    <p>See <a href="https://github.com/VadimToptunov/mobile_test_recorder">documentation</a> for more details.</p>
    ]]>    </description>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Tool Window -->
        <toolWindow id="Mobile Test Recorder" anchor="right"
                    factoryClass="com.mobiletest.recorder.ui.MTRToolWindowFactory" icon="/icons/mtr-icon.svg"/>

        <!-- Settings -->
        <applicationConfigurable id="com.mobiletest.recorder.settings" displayName="Mobile Test Recorder"
                                 instance="com.mobiletest.recorder.settings.MTRSettingsConfigurable"/>

        <!-- Application Service -->
        <applicationService serviceImplementation="com.mobiletest.recorder.services.MTRDaemonService"/>
    </extensions>

    <!-- Notification Group -->
    <extensions defaultExtensionNs="com.intellij">
        <notificationGroup id="Observe Framework" displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- Main Toolbar Actions -->
        <group id="MTR.ToolbarActions" text="Mobile Test Recorder" popup="false">
            <action id="MTR.StartDaemon" class="com.mobiletest.recorder.actions.StartDaemonAction" text="Start Daemon"
                    description="Start mobile-test-recorder daemon" icon="AllIcons.Actions.Execute"/>
            <action id="MTR.StopDaemon" class="com.mobiletest.recorder.actions.StopDaemonAction" text="Stop Daemon"
                    description="Stop daemon" icon="AllIcons.Actions.Suspend"/>
            <separator/>
            <action id="MTR.RefreshDevices" class="com.mobiletest.recorder.actions.RefreshDevicesAction"
                    text="Refresh Devices" description="Refresh device list" icon="AllIcons.Actions.Refresh"/>
            <action id="MTR.CaptureScreenshot" class="com.mobiletest.recorder.actions.CaptureScreenshotAction"
                    text="Capture Screenshot" description="Capture device screenshot"
                    icon="AllIcons.Actions.Menu_saveall"/>
        </group>

        <!-- STEP 11: Enhanced Actions -->
        <group id="MTR.ObserveActions" text="Observe Framework" popup="true" icon="AllIcons.General.GearPlain">
            <add-to-group group-id="ToolsMenu" anchor="last"/>

            <action id="MTR.SecurityScan" class="com.mobiletest.recorder.actions.SecurityScanAction"
                    text="Security Scan" description="Scan project for security vulnerabilities"
                    icon="AllIcons.Nodes.SecurityRole"/>

            <action id="MTR.GenerateTest" class="com.mobiletest.recorder.actions.GenerateTestAction"
                    text="Generate Test from Page Object" description="Generate test from selected Page Object"
                    icon="AllIcons.Actions.IntentionBulbGrey"/>

            <action id="MTR.HealSelector" class="com.mobiletest.recorder.actions.HealSelectorAction"
                    text="Heal Selector" description="Get AI-powered selector healing suggestions"
                    icon="AllIcons.Actions.QuickfixBulb">
                <keyboard-shortcut keymap="$default" first-keystroke="ctrl alt H"/>
            </action>

            <action id="MTR.FuzzTest" class="com.mobiletest.recorder.actions.FuzzTestAction"
                    text="Run Fuzz Test" description="Run fuzzing test on UI element"
                    icon="AllIcons.Actions.Lightning"/>

            <separator/>

            <action id="MTR.StartDaemon2" class="com.mobiletest.recorder.actions.StartDaemonAction"
                    text="Start Observe Daemon" description="Start the Observe framework daemon"
                    icon="AllIcons.Actions.Execute"/>
            <action id="MTR.StopDaemon2" class="com.mobiletest.recorder.actions.StopDaemonAction"
                    text="Stop Observe Daemon" description="Stop the Observe framework daemon"
                    icon="AllIcons.Actions.Suspend"/>
        </group>

        <!-- Editor Context Menu -->
        <group id="MTR.EditorPopupMenu" text="Observe">
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
            <separator/>
            <reference ref="MTR.HealSelector"/>
            <reference ref="MTR.GenerateTest"/>
        </group>
    </actions>
</idea-plugin>
