# Pre-commit hooks for Mobile Test Recorder
stages: [ push ]
pass_filenames: false
language: system
entry: pytest tests/ -v -k "test_critical or test_security" --tb=short
name: Run critical tests
- id: test-critical

  stages: [ commit ]
  pass_filenames: false
  language: system
  entry: bash -c 'if grep -r "password.*=.*['\''\"]\w\{8,\}" framework/ --include="*.py" | grep -v test | grep -v example; then echo "Found hardcoded password"; exit 1; fi'
  name: Check for hardcoded secrets
- id: no-hardcoded-secrets

  stages: [ commit ]
  pass_filenames: false
  types: [ python ]
  language: system
  entry: python -m framework.security.config
  name: Security Scanner
- id: security-scan
hooks:
- repo: local

    additional_dependencies: [ 'types-PyYAML', 'types-requests' ]
    args: [ '--ignore-missing-imports', '--no-error-summary' ]
    - id: mypy
  hooks:
  rev: v1.8.0
- repo: https://github.com/pre-commit/mirrors-mypy

    args: [ '--max-line-length=120', '--extend-ignore=E203,E501' ]
    - id: flake8
  hooks:
  rev: 7.0.0
- repo: https://github.com/pycqa/flake8

    args: [ '--line-length=120' ]
    language_version: python3.13
    - id: black
  hooks:
  rev: 23.12.1
- repo: https://github.com/psf/black

    - id: mixed-line-ending
    - id: detect-private-key
    - id: check-merge-conflict
      args: [ '--maxkb=1000' ]
    - id: check-added-large-files
    - id: check-json
    - id: check-yaml
    - id: end-of-file-fixer
    - id: trailing-whitespace
  hooks:
  rev: v4.5.0
- repo: https://github.com/pre-commit/pre-commit-hooks
repos:

# Install: pip install pre-commit && pre-commit install
